# ====== PATHS / SERVER ======
M4_MODELS_DIR="/Users/horioshuuhei/m4-meet-models"
M4_DIAR_DIR="/Users/horioshuuhei/m4-meet-models/diar"
LOG_DIR=backend/data
PORT_BACKEND=8001
PORT_FRONTEND=5173
VITE_API_BASE=
VITE_WS_BASE=

# ====== ASR: ReazonSpeech Zipformer (Offline) ======
M4_ASR_KIND=zipformer-ja-reazonspeech
M4_ASR_LIVE=1
M4_ASR_DIR="/Users/horioshuuhei/m4-meet-models/reazonspeech-zipformer"
M4_ASR_TOKENS="/Users/horioshuuhei/m4-meet-models/reazonspeech-zipformer/tokens.txt"
M4_ASR_ENCODER="/Users/horioshuuhei/m4-meet-models/reazonspeech-zipformer/encoder-epoch-99-avg-1.onnx"
M4_ASR_DECODER="/Users/horioshuuhei/m4-meet-models/reazonspeech-zipformer/decoder-epoch-99-avg-1.onnx"
M4_ASR_JOINER="/Users/horioshuuhei/m4-meet-models/reazonspeech-zipformer/joiner-epoch-99-avg-1.onnx"
M4_ASR_DECODING_METHOD=greedy_search
M4_ASR_THREADS=4

# ====== VAD（off: ASR内のEPに任せる） ======
M4_VAD_ENGINE=off

# セグメント確定・ブリッジ制御
MIN_TURN_SEC=0.70
MIN_TURN_CHARS=3
WS_PARTIAL_MODE=off
RECENT_FINAL_WINDOW_S=6.0
M4_MIN_ASR_SEC=1.50
MIN_ASR_SEC=1.50
M4_MAX_TURN_SEC=12.0

# ====== ライブ話者分離（fluidaudio stream） ======
M4_DIAR_MODE=auto
M4_DIAR_MAX_K=3
M4_DIAR_K_MAX=3
M4_DIAR_BOOT_SEC=10
M4_DIAR_FREEZE_SEC=2
M4_DIAR_MIN_SHORT_SEC=0.40
M4_DIAR_MIN_SWITCH_SEC=0.60
M4_DIAR_SHORT_ALT=0.72
M4_DIAR_SHORT_DELTA=0.08
M4_DIAR_SIM_BASE=0.72
M4_DIAR_DELTA_SWITCH=0.03
M4_DIAR_SOFT_MIN=0.60
M4_DIAR_STICKY_SEC=1.0
M4_DIAR_MARGIN_STRONG=0.05
M4_DIAR_WEAK_MARGIN=0.04
M4_DIAR_OPP_STREAK_N=2
M4_DIAR_OPP_STREAK_SEC=0.8
M4_DIAR_INTRASEG=off
M4_DIAR_LONG_SWITCH_SEC=1.8
M4_DIAR_LONG_ALT_SIM=0.68
M4_DIAR_LONG_ALT_MARGIN=0.02
M4_DIAR_MIN_SENT_FOR_INTRASPLIT=1.40
M4_DIAR_INTRASPLIT_BACKTRACE_SEC=0.45
M4_DIAR_INTRASPLIT_COOLDOWN_SEC=2.5
M4_DIAR_ENGINE=fluidaudio
M4_DIAR_EMB_WIN_S=1.8
M4_DIAR_EMB_HOP_S=0.6
M4_DIAR_AHC_DIST_THR=0.78
M4_DIAR_NEW_SPK_MIN_SEC=1.0
M4_DIAR_NEW_SPK_COOLDOWN_SEC=0.5
M4_DIAR_NEW_SPK_MAX_SIM=1.01
M4_DIAR_SAME_SPK_SIM=1.01
M4_DIAR_REASSIGN_BACKTRACE_SEC=4.0
M4_DIAR_PRUNE_SEC=3.0
M4_DIAR_LOG_DECISIONS=on

# ====== 停止後: Whisper再転記 / 要約 ======
M4_BATCH_WHISPER=on
M4_WHISPER_MODEL=large-v3
M4_WHISPER_DEVICE=auto
M4_WHISPER_COMPUTE=int8
M4_WHISPER_BEAM=5
M4_WHISPER_THREADS=4
M4_WHISPER_BEFORE_CUT=on
M4_INITIAL_PROMPT_FILE="/Users/horioshuuhei/m4-meet-models/prompts/ja_init.txt"
M4_BATCH_SUMMARY=on
M4_BATCH_TRANSLATE=off
M4_MT_KIND=off
M4_CT2_DIR=
M4_ENABLE_DIAR_BATCH=on
M4_FLUIDAUDIO_BIN=/opt/homebrew/bin/fluidaudio
M4_FLUIDAUDIO_MODE=offline
M4_FLUIDAUDIO_THRESHOLD=0.60

# ====== LLM (Ollama) ======
M4_LLM_PROVIDER=ollama
M4_OLLAMA_BASE=http://127.0.0.1:11434
M4_OLLAMA_MODEL=qwen2.5:7b-instruct
M4_OLLAMA_TEMPERATURE=0.3
M4_OLLAMA_MAX_TOKENS=768
M4_OLLAMA_TIMEOUT=180

# ====== Google OAuth ======
GOOGLE_CLIENT_ID=1095453526956-0trfu69if0dvkd0rqei7b54vcss4fvld.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=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
GOOGLE_REDIRECT_URI=https://custody-update-roof-determine.trycloudflare.com/api/auth/google/callback
GOOGLE_LOGIN_REDIRECT_URL=/meetings
GOOGLE_CALENDAR_TIMEZONE=Asia/Tokyo
VITE_ENABLE_GOOGLE_LOGIN=true
VITE_ENABLE_GOOGLE_SYNC=true
SESSION_SECRET=change-me
