# ============================================================
# M4-Meet 環境設定ファイル (.env.example)
# ============================================================
# このファイルをコピーして .env を作成してください
# 'npm run setup' を実行すると自動で .env が生成されます

# --- モデル格納ディレクトリ ---
# セットアップスクリプトでダウンロードしたモデルの場所
M4_MODELS_DIR=$HOME/m4-meet-models
M4_ASR_DIR=$HOME/m4-meet-models/sensevoice
M4_ASR_TOKENS=$HOME/m4-meet-models/sensevoice/tokens.txt
M4_ASR_MODEL=$HOME/m4-meet-models/sensevoice/model.int8.onnx
M4_DIAR_DIR=$HOME/m4-meet-models/diar

# --- 翻訳/TTS (オプション) ---
# 翻訳とTTSが不要な場合はこれらの行をコメントアウト
M4_CT2_DIR=$HOME/m4-meet-models/ct2_m2m100_418m
M4_TTS_VOICE=$HOME/m4-meet-models/tts/piper/ja_JP-lessac-medium.onnx

# --- LLM 設定 (要約機能) ---
# 推奨: Ollama (ローカルで動作するOpenAI互換API)
M4_LLM_PROVIDER=ollama
M4_OLLAMA_BASE=http://127.0.0.1:11434
M4_OLLAMA_MODEL=qwen2.5:7b-instruct
M4_OLLAMA_TEMPERATURE=0.3
M4_OLLAMA_MAX_TOKENS=768
M4_OLLAMA_TIMEOUT=180

# 代替: llama.cpp を使用する場合 (Ollamaの代わり)
# M4_LLM_PROVIDER=  # 空にするか未設定
# M4_LLM_BIN=llama-cli
# M4_LLM_MODEL=$HOME/m4-meet-models/llm/Meta-Llama-3-8B-Instruct.Q4_K_M.gguf

# --- サーバーポート設定 ---
PORT_BACKEND=8000
PORT_FRONTEND=5173

# --- ログとデータディレクトリ ---
LOG_DIR=backend/data

# --- ASR/バッチ処理のランタイム設定 ---
M4_ASR_KIND=whisper-stream
M4_ASR_LIVE=1
STREAM_WIN_MS=960
STREAM_HOP_MS=240
M4_VAD_ENGINE=energy
M4_NEAR_SILENT_RMS=0.0012
VAD_PREROLL_MS=300
TURN_GAP_S=0.65
MIN_TURN_SEC=0.45
MIN_TURN_CHARS=6
RECENT_FINAL_WINDOW_S=6.0
WS_PARTIAL_MODE=off
# VAD 感度調整（必要に応じて有効化）
# M4_VAD_THRESHOLD=0.28
# M4_VAD_RMS_FALLBACK=0.003
M4_BATCH_WHISPER=on      # 停止後に Whisper で再転記（CPU/GPU 環境に合わせて調整）
M4_BATCH_TRANSLATE=off   # 翻訳モデル導入済みなら on
M4_BATCH_SUMMARY=off     # 要約を使用する場合は on + LLM 設定
M4_AUTOFILL_MINUTES=off  # バッチ結果で議事録UIを自動上書きしない

# --- Google OAuth (任意) ---
# Googleログイン/カレンダー連携を使う場合は以下を設定
# GOOGLE_REDIRECT_URI を省略するとバックエンドの /api/auth/google/callback が自動で使われます
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=
GOOGLE_LOGIN_REDIRECT_URL=/
VITE_ENABLE_GOOGLE_LOGIN=false
GOOGLE_CALENDAR_TIMEZONE=Asia/Tokyo
VITE_ENABLE_GOOGLE_SYNC=false
SESSION_SECRET=change-me
